class MyWordSearch{constructor(t,s,i,r=i){this.xSize=i,this.ySize=r,this.words=t,this.wordsNumber=s,this.board=new Array,this.usedWords=new Object;for(let t=this.countUsedWords=0;t<this.words.length;t++)if(-1!=this.words[t].indexOf("#"))throw new Error("One of the words contains a void character");for(let t=0;t<this.words.length;t++)(this.words[t].length>this.ySize||this.words[t].length>this.xSize)&&this.words.splice(t--,1);if(this.wordsNumber>this.words.length)throw new Error(`The value ${this.wordsNumber} must be less than or equal to the word counts`);if(this.wordsNumber>this.xSize||this.wordsNumber>this.ySize)throw new Error(`The value ${this.wordsNumber} must be less than or equal to the column/row on the board`);this.fillEmptyBoard(),this.main()}fillEmptyBoard=function(){for(let s=0;s<this.ySize;s++){this.board[s]=new Array;for(let t=0;t<this.xSize;t++)this.board[s][t]="#"}};fillNotEmptyBoard=function(){var i,r="abcdefghijklmnopqrstuvwxyz";this.board.length||this.fillEmptyBoard();for(let s=0;s<this.ySize;s++)for(let t=0;t<this.xSize;t++)"#"==this.board[s][t]&&(i=Math.floor(Math.random()*r.length),this.board[s][t]=r[i])};main=function(){for(var t=["VER","HOR","UP","DOWN"];this.countUsedWords<this.wordsNumber;){var s=Math.floor(Math.random()*t.length),i=Math.floor(Math.random()*this.xSize),r=Math.floor(Math.random()*this.ySize);switch(t[s]){case"VER":var e=this.straightCount(i,r,this.xSize,"VER");if(!e)break;var h=this.words1(i,r,this.xSize,e,"VER");h?this.printer1(i,r,h,"VER"):this.check();break;case"HOR":h=this.straightCount(r,i,this.ySize,"HOR");if(!h)break;var o=this.words1(r,i,this.ySize,h,"HOR");o?this.printer1(r,i,o,"HOR"):this.check();break;case"UP":o=this.askewCount(i,r,"UP");if(!o)break;var d=this.words2(i,r,o,"UP");d?this.printer2(i,r,d,"UP"):this.check();break;case"DOWN":d=this.askewCount(i,r,"DOWN");if(!d)break;d=this.words2(i,r,d,"DOWN");d?this.printer2(i,r,d,"DOWN"):this.check()}}this.fillNotEmptyBoard()};straightCount=function(t,s,i,r){let e,h;if("VER"==r)e="x",h="y";else{if("HOR"!=r)throw new Error(`the passed argument: (${r}) is out of the range. "must be VER/HOR"`);e="y",h="x"}let o=i-t,d;for(var n in this.usedWords)if(this.usedWords[n][h]==s&&(t<this.usedWords[n][e][0]&&(d=this.usedWords[n][e][0]-t)<o&&(o=d),t>=this.usedWords[n][e][0]&&t<=this.usedWords[n][e][1]))return!1;return o};askewCount=function(t,s,i){if("DOWN"!=i&&"UP"!=i)throw new Error(`the passed argument: (${i}) is out of the range. "must be DOWN/UP"`);let r,e;e="DOWN"==i?(r=this.xSize-t,this.ySize-s):(r=this.xSize-t,s+1);let h,o;h=r<=e?r:e;let d=new Object;r<=e?(d.x=this.xSize-1,d.y="DOWN"==i?this.xSize-t+s-1:s-(this.xSize-t)+1):(d.x="DOWN"==i?this.ySize-s+t-1:s+t,d.y="DOWN"==i?this.ySize-1:0);let n=new Object;for(var a in this.usedWords)if(this.usedWords[a].type==i){if(e="DOWN"==i?(r=this.xSize-this.usedWords[a].x[0],this.ySize-this.usedWords[a].y[0]):(r=this.xSize-this.usedWords[a].x[0],this.usedWords[a].y[0]+1),r<=e?(n.x=this.xSize-1,n.y="DOWN"==i?this.xSize-this.usedWords[a].x[0]+this.usedWords[a].y[0]-1:this.usedWords[a].y[0]-(this.xSize-this.usedWords[a].x[0])+1):(n.x="DOWN"==i?this.ySize-this.usedWords[a].y[0]+this.usedWords[a].x[0]-1:this.usedWords[a].y[0]+this.usedWords[a].x[0],n.y="DOWN"==i?this.ySize-1:0),d.x==n.x&&d.y==n.y&&(t<this.usedWords[a].x[0]&&(o=this.usedWords[a].x[0]-t)<h&&(h=o),t<=this.usedWords[a].x[1]&&t>=this.usedWords[a].x[0]))return!1;n=new Object}return h};words1=function(s,i,r,e,h){const o=this.words.filter(t=>t.length<=e),d=new Object;let n=0;for(let t=s;t<r;t++)("VER"==h?"#"!=this.board[i][t]:"#"!=this.board[t][i])&&(d[n++]={char:"VER"==h?this.board[i][t]:this.board[t][i],idx:t});for(let t=0;t<o.length;t++)for(var a in d)if(o[t][d[a].idx-s]!=d[a].char&&o[t].length+s-1>=d[a].idx){o.splice(t--,1);break}for(let t=0;t<o.length;t++)for(var u in this.usedWords)if(o[t]==this.usedWords[u].word){o.splice(t--,1);break}return!!o.length&&o};words2=function(s,t,i,r){const e=this.words.filter(t=>t.length<=i),h=new Object;let o=0,d=s,n=t,a=0;for(;a<i;)"#"!=this.board[n][d]&&(h[o++]={char:this.board[n][d],idx:[d,n]}),d++,a++,"DOWN"==r?n++:n--;for(let t=0;t<e.length;t++)for(var u in h)if(e[t][h[u].idx[0]-s]!=h[u].char&&e[t].length+s-1>=h[u].idx[0]){e.splice(t--,1);break}for(let t=0;t<e.length;t++)for(var l in this.usedWords)if(e[t]==this.usedWords[l].word){e.splice(t--,1);break}return!!e.length&&e};printer1=function(i,r,e,h){var o=Math.floor(Math.random()*e.length);for(let t=i,s=0;s<e[o].length;t++,s++)"VER"==h?this.board[r][t]=e[o][s]:this.board[t][r]=e[o][s];this.usedWords[this.countUsedWords++]={type:h,x:"VER"==h?[i,i+(e[o].length-1)]:r,y:"VER"==h?r:[i,i+(e[o].length-1)],word:e[o]}};printer2=function(r,e,h,o){var d=Math.floor(Math.random()*h.length);for(let t=r,s=e,i=0;i<h[d].length;i++)this.board[s][t]=h[d][i],t++,"DOWN"==o?s++:s--;this.usedWords[this.countUsedWords++]={type:o,x:[r,r+(h[d].length-1)],y:"DOWN"==o?[e,e+(h[d].length-1)]:[e,e-h[d].length+1],word:h[d]}};check=function(){var i;for(let s=0;s<this.ySize;s++)for(let t=0;t<this.xSize;t++){if(i=this.straightCount(t,s,this.xSize,"VER"),this.words1(t,s,this.xSize,i,"VER"))return 0;if(i=this.straightCount(s,t,this.ySize,"HOR"),this.words1(s,t,this.ySize,i,"HOR"))return 0;if(i=this.askewCount(t,s,"UP"),this.words2(t,s,i,"UP"))return 0;if(i=this.askewCount(t,s,"DOWN"),this.words2(t,s,i,"DOWN"))return 0}this.board=new Array,this.usedWords=new Object,this.countUsedWords=0,this.fillEmptyBoard()}}